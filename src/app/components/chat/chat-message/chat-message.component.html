<div style="display: flex; flex-direction: column;">
    <mat-chip style="width: fit-content; align-self: center; margin: 8px" *ngIf="isPredecessorSameAuthor()" color="accent" selected removable="false">{{ getDateDivider(message) }}</mat-chip>
    <mat-card style="box-shadow: none; background-color: transparent;" [ngStyle]="{
      'align-self': message.isMine() ? 'flex-end' : 'flex-start',
      'padding-top': !(isPredecessorSameAuthor()) ? '16px' : '0px',
      'padding-bottom': !(isPredecessorSameAuthor()) ? '16px' : '0px'
    }">
        <!-- Message Header -->
        <mat-card-header [ngStyle]="{
        'justify-content': 'flex-start',
        'margin-bottom': '8px',
        'flex-direction': message.isMine() ? 'row-reverse' : 'row'
      }">
            <img mat-card-avatar src="{{message.isMine()?loggedInUser.getAvatar():receiver.getAvatar()}}" width="50px" />
            <!--<mat-card-title *ngIf="!(isPredecessorSameAuthor())" style="font-size: 16px; margin-bottom: 6px;">
                {{ loggedInUser.getFullName() }}
            </mat-card-title>-->
        </mat-card-header>
        <mat-card-content style="display: inline-flex; flex-direction: column; width: 100%;">
            <!-- Message content-->
            <mat-card [ngStyle]="{
          'background-color':
          message.isMine() ? 'lightslategrey' : '#536DFE',
          color: message.isMine() ? 'white' : 'white',
          'align-self': message.isMine() ? 'flex-end' : 'flex-start',
          'text-align': message.isMine() ? 'end' : 'start',
          'border-top-right-radius': message.isMine() ? '0px' : '4px',
          'border-top-left-radius': message.isMine() ? '0px' : '4px',
          'min-width': '150px',
          'max-width': '100%',
          'margin-bottom': '8px',
          padding: '16px 12px 12px 12px'
        }">
                <div style="top: 2px;position: absolute;right: 4px; font-size: 12px; opacity: 0.6">
                    {{ getCreatedDate(message) }}
                </div>
                <span style="overflow-wrap: break-word;">{{ message.getMessage() }}</span>
            </mat-card>

            <button *ngIf="allowsReply" [ngStyle]="{
          'align-self': message.isMine() ? 'flex-end' : 'flex-start',
          'margin-bottom': '8px',
          'font-size': '10px',
          'line-height': '18px'
        }" mat-stroked-button>
        REPLY
      </button>

            <!-- Attached files -->
            <mat-chip-list [ngStyle]="{
          display: 'flex',
          'justify-content': message.isMine() ? 'flex-end' : 'flex-start'
        }">
                <mat-chip *ngFor="let attachment of message.attachments">
                    <mat-icon>insert_drive_file</mat-icon>
                    {{ attachment.name }}
                </mat-chip>
            </mat-chip-list>
        </mat-card-content>
    </mat-card>
</div>